<html>
<title>User Output</title>

<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/Homie.css">
    <style>
        h1 {
            text-align: center;
        }
        table {
    border: 0; 
    margin: 5px auto; 
    width: 50%;
    }
    th {
    background-color: purple;
    color: white;
    }
    td {
    background-color: rgb(153, 121, 160);
    color: white;
    }
    </style>
</head>

<header>
    <article class="colum">
        <h1>Coffee Shop</h1>
    </article>
</header>
<nav>
    <h3><a href="/search"> Search</a></h3>
    <h3><a href="/product-manage"> Products</a></h3>
    <h3><a href="/user-manage"> Users</a></h3>
</nav>
<body>
<h1>Admin Details</h1>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Address</th>
        <th>Age</th>
        <th>Gender</th>
        <th>Email</th>
      </tr>
      <%
      if(action == "sNoCriteria")
      {
        if(data.length > 0)
        {
          data.forEach(function(_data) {
      %>
      <tr>
          <td><%= _data.admin_id %></td>
          <td><%= _data.firstname %></td>
          <td><%= _data.lastname %></td>
          <td><%= _data.address %></td>
          <td><%= _data.age %></td>
          <td><%= _data.sex %></td>
          <td><%= _data.email %></td>
      </tr>
      <%
          })
        }
      }
      %>
    </thead>
    <tbody id="table-body">
    </tbody>
  </table>

  <script>
    // Fetch data from the server using JavaScript
    fetch('/submit')                                      //change here
      .then(response => response.json())
      .then(data => {
        const tableBody = document.getElementById('table-body');
        data.forEach(row => {
          const tr = document.createElement('tr');
          const td1 = document.createElement('td');
          const td2 = document.createElement('td');
          const td4 = document.createElement('td');
          const td5 = document.createElement('td');
          const td6 = document.createElement('td');
          const td7 = document.createElement('td');
          td1.textContent = row.admin_id;
          td2.textContent = row.firstname;
          td3.textContent = row.lastname;
          td4.textContent = row.address;
          td5.textContent = row.age;
          td6.textContent = row.sex;
          td7.textContent = row.email;
          tr.appendChild(td1);
          tr.appendChild(td2);
          tr.appendChild(td3);
          tr.appendChild(td4);
          tr.appendChild(td5);
          tr.appendChild(td6);
          tr.appendChild(td7);
          tableBody.appendChild(tr);
        });
      });
  </script>
</body>
</html>
